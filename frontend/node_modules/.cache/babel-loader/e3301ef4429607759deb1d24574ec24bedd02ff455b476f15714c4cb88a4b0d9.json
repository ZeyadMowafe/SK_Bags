{"ast":null,"code":"var _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport { X, Check, AlertCircle } from 'lucide-react';\nconst CheckoutModal = ({\n  customerInfo,\n  setCustomerInfo,\n  cart,\n  getTotalPrice,\n  onClose,\n  onSubmit\n}) => {\n  _s();\n  const [showResult, setShowResult] = useState(null); // null, 'success', or 'failure'\n  const [isLoading, setIsLoading] = useState(false);\n  const [errorMessage, setErrorMessage] = useState('');\n  const handleSubmit = async e => {\n    e.preventDefault();\n    console.log('üöÄ Form submitted, starting process...');\n    setIsLoading(true);\n    setErrorMessage('');\n    setShowResult(null);\n    console.log('üîÑ State updated: isLoading=true, showResult=null');\n    try {\n      console.log('üìû Calling onSubmit function...');\n      const result = await onSubmit();\n      console.log('‚úÖ onSubmit completed with result:', result);\n\n      // ÿßŸÑÿ™ÿµÿ≠Ÿäÿ≠ ŸáŸÜÿß - ÿßŸÑÿ¥ÿ±ÿ∑ ŸÉÿßŸÜ ŸÖÿπŸÉŸàÿ≥\n      if (result.id || result.success) {\n        console.log('üéâ Success confirmed! Setting showResult to success');\n        setShowResult('success');\n      } else {\n        console.log('‚ùå Success not confirmed, result:', result);\n        throw new Error('Order confirmation failed');\n      }\n    } catch (error) {\n      console.log('üí• Error caught:', error);\n      console.log('üîç Error details:', {\n        message: error.message,\n        stack: error.stack,\n        name: error.name\n      });\n      let errorMsg = 'An error occurred while submitting your order';\n      if (error && error.message) {\n        if (error.message.includes('Failed to fetch') || error.message.includes('NetworkError') || !navigator.onLine) {\n          errorMsg = 'No internet connection. Please check your network and try again';\n        } else if (error.message.includes('500')) {\n          errorMsg = 'Server error. Please try again later';\n        } else {\n          errorMsg = error.message;\n        }\n      }\n      console.log('üö® Setting error message:', errorMsg);\n      setErrorMessage(errorMsg);\n      setShowResult('failure');\n    } finally {\n      console.log('üèÅ Finally block: setting isLoading to false');\n      setIsLoading(false);\n    }\n  };\n\n  // ÿ®ÿßŸÇŸä ÿßŸÑŸÉŸàÿØ Ÿäÿ∏ŸÑ ŸÉŸÖÿß ŸáŸà ÿ®ÿØŸàŸÜ ÿ™ÿ∫ŸäŸäÿ±...\n  // resetAndTryAgain, closeModal, ŸàÿßŸÑÿπŸÜÿßÿµÿ± ÿßŸÑÿ£ÿÆÿ±Ÿâ\n};\n_s(CheckoutModal, \"Qjixa++Sa8YOVMOhEly05ESKC14=\");\n_c = CheckoutModal;\nexport default CheckoutModal;\nvar _c;\n$RefreshReg$(_c, \"CheckoutModal\");","map":{"version":3,"names":["React","useState","X","Check","AlertCircle","CheckoutModal","customerInfo","setCustomerInfo","cart","getTotalPrice","onClose","onSubmit","_s","showResult","setShowResult","isLoading","setIsLoading","errorMessage","setErrorMessage","handleSubmit","e","preventDefault","console","log","result","id","success","Error","error","message","stack","name","errorMsg","includes","navigator","onLine","_c","$RefreshReg$"],"sources":["C:/Users/Mowafy/Desktop/Hand_Made/frontend/src/components/CheckoutModal.js"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { X, Check, AlertCircle } from 'lucide-react';\r\n\r\nconst CheckoutModal = ({ customerInfo, setCustomerInfo, cart, getTotalPrice, onClose, onSubmit }) => {\r\n  const [showResult, setShowResult] = useState(null); // null, 'success', or 'failure'\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [errorMessage, setErrorMessage] = useState('');\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    console.log('üöÄ Form submitted, starting process...');\r\n    \r\n    setIsLoading(true);\r\n    setErrorMessage('');\r\n    setShowResult(null);\r\n    \r\n    console.log('üîÑ State updated: isLoading=true, showResult=null');\r\n    \r\n    try {\r\n      console.log('üìû Calling onSubmit function...');\r\n      \r\n      const result = await onSubmit();\r\n      \r\n      console.log('‚úÖ onSubmit completed with result:', result);\r\n      \r\n      // ÿßŸÑÿ™ÿµÿ≠Ÿäÿ≠ ŸáŸÜÿß - ÿßŸÑÿ¥ÿ±ÿ∑ ŸÉÿßŸÜ ŸÖÿπŸÉŸàÿ≥\r\n      if (result.id || result.success) {\r\n        console.log('üéâ Success confirmed! Setting showResult to success');\r\n        setShowResult('success');\r\n      } else {\r\n        console.log('‚ùå Success not confirmed, result:', result);\r\n        throw new Error('Order confirmation failed');\r\n      }\r\n      \r\n    } catch (error) {\r\n      console.log('üí• Error caught:', error);\r\n      console.log('üîç Error details:', {\r\n        message: error.message,\r\n        stack: error.stack,\r\n        name: error.name\r\n      });\r\n      \r\n      let errorMsg = 'An error occurred while submitting your order';\r\n      \r\n      if (error && error.message) {\r\n        if (error.message.includes('Failed to fetch') || \r\n            error.message.includes('NetworkError') || \r\n            !navigator.onLine) {\r\n          errorMsg = 'No internet connection. Please check your network and try again';\r\n        } else if (error.message.includes('500')) {\r\n          errorMsg = 'Server error. Please try again later';\r\n        } else {\r\n          errorMsg = error.message;\r\n        }\r\n      }\r\n      \r\n      console.log('üö® Setting error message:', errorMsg);\r\n      setErrorMessage(errorMsg);\r\n      setShowResult('failure');\r\n      \r\n    } finally {\r\n      console.log('üèÅ Finally block: setting isLoading to false');\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  // ÿ®ÿßŸÇŸä ÿßŸÑŸÉŸàÿØ Ÿäÿ∏ŸÑ ŸÉŸÖÿß ŸáŸà ÿ®ÿØŸàŸÜ ÿ™ÿ∫ŸäŸäÿ±...\r\n  // resetAndTryAgain, closeModal, ŸàÿßŸÑÿπŸÜÿßÿµÿ± ÿßŸÑÿ£ÿÆÿ±Ÿâ\r\n};\r\n\r\nexport default CheckoutModal;"],"mappings":";AAAA,OAAOA,KAAK,IAAIC,QAAQ,QAAQ,OAAO;AACvC,SAASC,CAAC,EAAEC,KAAK,EAAEC,WAAW,QAAQ,cAAc;AAEpD,MAAMC,aAAa,GAAGA,CAAC;EAAEC,YAAY;EAAEC,eAAe;EAAEC,IAAI;EAAEC,aAAa;EAAEC,OAAO;EAAEC;AAAS,CAAC,KAAK;EAAAC,EAAA;EACnG,MAAM,CAACC,UAAU,EAAEC,aAAa,CAAC,GAAGb,QAAQ,CAAC,IAAI,CAAC,CAAC,CAAC;EACpD,MAAM,CAACc,SAAS,EAAEC,YAAY,CAAC,GAAGf,QAAQ,CAAC,KAAK,CAAC;EACjD,MAAM,CAACgB,YAAY,EAAEC,eAAe,CAAC,GAAGjB,QAAQ,CAAC,EAAE,CAAC;EAEpD,MAAMkB,YAAY,GAAG,MAAOC,CAAC,IAAK;IAChCA,CAAC,CAACC,cAAc,CAAC,CAAC;IAClBC,OAAO,CAACC,GAAG,CAAC,wCAAwC,CAAC;IAErDP,YAAY,CAAC,IAAI,CAAC;IAClBE,eAAe,CAAC,EAAE,CAAC;IACnBJ,aAAa,CAAC,IAAI,CAAC;IAEnBQ,OAAO,CAACC,GAAG,CAAC,mDAAmD,CAAC;IAEhE,IAAI;MACFD,OAAO,CAACC,GAAG,CAAC,iCAAiC,CAAC;MAE9C,MAAMC,MAAM,GAAG,MAAMb,QAAQ,CAAC,CAAC;MAE/BW,OAAO,CAACC,GAAG,CAAC,mCAAmC,EAAEC,MAAM,CAAC;;MAExD;MACA,IAAIA,MAAM,CAACC,EAAE,IAAID,MAAM,CAACE,OAAO,EAAE;QAC/BJ,OAAO,CAACC,GAAG,CAAC,qDAAqD,CAAC;QAClET,aAAa,CAAC,SAAS,CAAC;MAC1B,CAAC,MAAM;QACLQ,OAAO,CAACC,GAAG,CAAC,kCAAkC,EAAEC,MAAM,CAAC;QACvD,MAAM,IAAIG,KAAK,CAAC,2BAA2B,CAAC;MAC9C;IAEF,CAAC,CAAC,OAAOC,KAAK,EAAE;MACdN,OAAO,CAACC,GAAG,CAAC,kBAAkB,EAAEK,KAAK,CAAC;MACtCN,OAAO,CAACC,GAAG,CAAC,mBAAmB,EAAE;QAC/BM,OAAO,EAAED,KAAK,CAACC,OAAO;QACtBC,KAAK,EAAEF,KAAK,CAACE,KAAK;QAClBC,IAAI,EAAEH,KAAK,CAACG;MACd,CAAC,CAAC;MAEF,IAAIC,QAAQ,GAAG,+CAA+C;MAE9D,IAAIJ,KAAK,IAAIA,KAAK,CAACC,OAAO,EAAE;QAC1B,IAAID,KAAK,CAACC,OAAO,CAACI,QAAQ,CAAC,iBAAiB,CAAC,IACzCL,KAAK,CAACC,OAAO,CAACI,QAAQ,CAAC,cAAc,CAAC,IACtC,CAACC,SAAS,CAACC,MAAM,EAAE;UACrBH,QAAQ,GAAG,iEAAiE;QAC9E,CAAC,MAAM,IAAIJ,KAAK,CAACC,OAAO,CAACI,QAAQ,CAAC,KAAK,CAAC,EAAE;UACxCD,QAAQ,GAAG,sCAAsC;QACnD,CAAC,MAAM;UACLA,QAAQ,GAAGJ,KAAK,CAACC,OAAO;QAC1B;MACF;MAEAP,OAAO,CAACC,GAAG,CAAC,2BAA2B,EAAES,QAAQ,CAAC;MAClDd,eAAe,CAACc,QAAQ,CAAC;MACzBlB,aAAa,CAAC,SAAS,CAAC;IAE1B,CAAC,SAAS;MACRQ,OAAO,CAACC,GAAG,CAAC,8CAA8C,CAAC;MAC3DP,YAAY,CAAC,KAAK,CAAC;IACrB;EACF,CAAC;;EAED;EACA;AACF,CAAC;AAACJ,EAAA,CAjEIP,aAAa;AAAA+B,EAAA,GAAb/B,aAAa;AAmEnB,eAAeA,aAAa;AAAC,IAAA+B,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}